---
phase: 02-schema-additions
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/schema/OrganizationSchema.astro
  - src/components/schema/WebSiteSchema.astro
autonomous: true
requirements:
  - SCHM-09
  - SCHM-10

must_haves:
  truths:
    - 'OrganizationSchema JSON-LD sameAs array contains Google Maps, Yelp, TripAdvisor URLs prepended before existing Facebook and Instagram entries'
    - 'WebSiteSchema JSON-LD contains a GEO-optimized description with keywords Ash Fork, Exit 146, and Route 66'
    - 'WebSiteSchema JSON-LD contains a publisher property referencing the Organization entity'
  artifacts:
    - path: 'src/components/schema/OrganizationSchema.astro'
      provides: 'Organization JSON-LD with expanded sameAs array (5 entries)'
      contains: 'tripadvisor.com'
    - path: 'src/components/schema/WebSiteSchema.astro'
      provides: 'WebSite JSON-LD with description, publisher, and inLanguage'
      contains: 'Exit 146'
  key_links:
    - from: 'src/components/schema/WebSiteSchema.astro'
      to: 'src/components/schema/OrganizationSchema.astro'
      via: 'publisher references same Organization entity'
      pattern: 'publisher.*Organization'
---

<objective>
Add sameAs entity links to OrganizationSchema and enrich WebSiteSchema with a GEO-optimized description and publisher property.

Purpose: sameAs links allow AI engines and Google to connect the business entity across platforms (Google Maps, Yelp, TripAdvisor). The WebSiteSchema description and publisher strengthen the site's entity signal for answer engine queries about restaurants on Route 66 / I-40 Exit 146.

Output: Updated OrganizationSchema.astro and WebSiteSchema.astro with new properties, passing TypeScript checks and producing valid JSON-LD.
</objective>

<execution_context>
@/Users/moni/.claude/get-shit-done/workflows/execute-plan.md
@/Users/moni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-schema-additions/02-CONTEXT.md
@.planning/phases/02-schema-additions/02-RESEARCH.md
@src/components/schema/OrganizationSchema.astro
@src/components/schema/WebSiteSchema.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand OrganizationSchema sameAs array with Google Maps, Yelp, and TripAdvisor URLs</name>
  <files>src/components/schema/OrganizationSchema.astro</files>
  <action>
Edit the existing OrganizationSchema.astro to replace the current sameAs array (Facebook, Instagram) with the expanded 5-entry array. Per CONTEXT.md locked decision, the ordering is: Google Maps, Yelp, TripAdvisor, Facebook, Instagram.

Replace the existing sameAs block:

```typescript
sameAs: [
  'https://www.facebook.com/profile.php?id=61566349169122',
  'https://www.instagram.com/panjabi_dhaba_sgb',
],
```

With:

```typescript
sameAs: [
  'https://maps.app.goo.gl/q2EJFMbMRaysU6vH8',
  'https://www.yelp.com/biz/spice-grill-and-bar-ash-fork',
  'https://www.tripadvisor.com/Restaurant_Review-g29037-d33218710-Reviews-Spice_Grill_Bar-Ash_Fork_Arizona.html',
  'https://www.facebook.com/profile.php?id=61566349169122',
  'https://www.instagram.com/panjabi_dhaba_sgb',
],
```

Use the Google Maps URL from CONTEXT.md (`q2EJFMbMRaysU6vH8`), NOT from REQUIREMENTS.md (`vHbdJk7hqXemMssB9`). CONTEXT.md is the later, authoritative source.

Keep all other OrganizationSchema properties unchanged.
</action>
<verify>

1. `npm run typecheck` passes
2. `npm run build` succeeds
3. Inspect `dist/index.html` and confirm the Organization JSON-LD sameAs array has exactly 5 entries in the correct order: Google Maps, Yelp, TripAdvisor, Facebook, Instagram
   </verify>
   <done>
   OrganizationSchema.astro sameAs array contains all 5 entity links in the order specified by CONTEXT.md. TypeScript passes. JSON-LD output is valid.
   </done>
   </task>

<task type="auto">
  <name>Task 2: Add description, publisher, and inLanguage to WebSiteSchema</name>
  <files>src/components/schema/WebSiteSchema.astro</files>
  <action>
Edit the existing WebSiteSchema.astro to add three new properties to the WebSite JSON-LD schema object. Keep existing `url` and `name` properties unchanged.

Add after the `name` property:

1. **description (SCHM-10):** A GEO-optimized description containing mandatory keywords "Ash Fork", "Exit 146", and "Route 66". Use this wording (Claude's discretion per CONTEXT.md):

```typescript
description: 'Spice Grill & Bar — authentic Indian and Punjabi restaurant on Historic Route 66 in Ash Fork, Arizona (I-40 Exit 146). The perfect pit stop for Grand Canyon travelers.',
```

2. **inLanguage:** Add `inLanguage: 'en'` — the site is English-only. Small signal, zero cost. Per Claude's discretion area in CONTEXT.md.

3. **publisher (SCHM-10):** Reference the Organization entity with minimal inline properties (avoids duplicating the full OrganizationSchema):

```typescript
publisher: {
  '@type': 'Organization',
  name: 'Spice Grill & Bar',
  url: 'https://spicegrillbar66.com',
},
```

Do NOT add SearchAction — user decision: site has no search functionality.

Preserve the existing `<script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} />` template line unchanged.
</action>
<verify>

1. `npm run typecheck` passes
2. `npm run build` succeeds
3. Inspect `dist/index.html` and confirm the WebSite JSON-LD contains: description with "Ash Fork", "Exit 146", "Route 66" keywords; publisher with @type Organization; inLanguage "en"
4. Confirm no SearchAction is present in the WebSite JSON-LD
   </verify>
   <done>
   WebSiteSchema.astro emits valid JSON-LD with GEO-optimized description (all 3 mandatory keywords present), publisher referencing the Organization entity, and inLanguage set to "en". No SearchAction present. TypeScript passes.
   </done>
   </task>

</tasks>

<verification>
1. `npm run typecheck` — zero errors across both modified files
2. `npm run build` — succeeds without warnings
3. `npm run test:quality` — lint, knip, typecheck, AEO audit all pass
4. Inspect built JSON-LD in dist/index.html for both Organization sameAs (5 entries) and WebSite description/publisher/inLanguage
</verification>

<success_criteria>

- OrganizationSchema sameAs has 5 entries in correct order (Google Maps, Yelp, TripAdvisor, Facebook, Instagram)
- WebSiteSchema has description containing "Ash Fork", "Exit 146", "Route 66"; publisher with Organization type; inLanguage "en"
- No SearchAction in WebSiteSchema
- `npm run typecheck` and `npm run build` pass cleanly
  </success_criteria>

<output>
After completion, create `.planning/phases/02-schema-additions/02-02-SUMMARY.md`
</output>
